{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/dangayle/wounded-animal-hotline/schemas/contacts.schema.json",
  "title": "Wounded Animal Hotline Contacts Schema",
  "version": "1.3.0",
  "description": "Strict, versioned schema for the Wounded Animal Hotline contacts data file. The root object MUST contain a $schema reference and a contacts array.",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "$schema": {
      "type": "string",
      "description": "A URI referencing the schema that the data file conforms to (self-describing file).",
      "format": "uri-reference"
    },
    "contacts": {
      "type": "array",
      "description": "An array of contact objects used for triage/routing.",
      "minItems": 1,
      "items": { "$ref": "#/definitions/contact" }
    }
  },
  "required": ["$schema", "contacts"],
  "definitions": {
    "phone_e164": {
      "type": "string",
      "pattern": "^\\+?[1-9]\\d{1,14}$",
      "description": "Phone number in E.164 format (preferred). Example: +15093350711"
    },
    "contact": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "description": "Official organization or office name."
        },
        "phone": { "$ref": "#/definitions/phone_e164" },
        "emergency_phone": {
          "$ref": "#/definitions/phone_e164",
          "description": "Immediate/emergency contact number (e.g., 911 or dedicated emergency line). Required."
        },
        "non_emergency_phone": {
          "$ref": "#/definitions/phone_e164",
          "description": "Non-emergency or business-hours contact number. Required."
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "Official website or information URL for the contact (if available)."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Primary contact email address for non-urgent communication (if available)."
        },
        "coverage": {
          "type": "array",
          "items": { "type": "string" },
          "minItems": 1,
          "description": "List of counties, jurisdictions, or textual coverage descriptors (e.g., 'All of Eastern Washington')."
        },
        "hours": {
          "type": "string",
          "minLength": 1,
          "description": "Human-readable hours of operation (e.g., '24/7', 'Mon-Fri 8:00-17:00')."
        },
        "services": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string",
            "enum": [
              "unsafe_animal_response",
              "emergency_wildlife_medical",
              "non_emergency_wildlife_rehab",
              "wildlife_stabilization",
              "domestic_animal_control",
              "livestock_control",
              "rabies_information",
              "general_information",
              "law_enforcement"
            ]
          },
          "description": "Standardized service tags used for routing decisions."
        },
        "animal_types": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string",
            "enum": [
              "large_mammals",
              "small_mammals",
              "raptors",
              "songbirds",
              "bats",
              "reptiles",
              "domestic_pets",
              "livestock",
              "raccoons",
              "coyotes",
              "skunks"
            ]
          },
          "description": "Categories of animals the contact is willing/able to handle."
        },
        "handles_rabies_vector_species": {
          "type": "boolean",
          "description": "True if the contact is approved/equipped to handle species that commonly vector rabies (e.g., bats)."
        },
        "notes": {
          "type": "string",
          "description": "Free-form notes for triage or instructions (e.g., 'call first', 'stabilize only')."
        }
      },
      "required": [
        "name",
        "phone",
        "coverage",
        "hours",
        "services",
        "animal_types",
        "handles_rabies_vector_species",
        "notes"
      ]
    }
  }
}
